<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <title>Password Protected Page</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }
        #dialogText {
            color: white;
            background-color: #333333;
        }
        
        #dialogWrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: table;
            background-color: #EEEEEE;
        }
        
        #dialogWrapCell {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }
        
        #mainDialog {
            max-width: 400px;
            margin: 5px;
            border: solid #AAAAAA 1px;
            border-radius: 10px;
            box-shadow: 3px 3px 5px 3px #AAAAAA;
            margin-left: auto;
            margin-right: auto;
            background-color: #FFFFFF;
            overflow: hidden;
            text-align: left;
        }
        #mainDialog > * {
            padding: 10px 30px;
        }
        #passArea {
            padding: 20px 30px;
            background-color: white;
        }
        #passArea > * {
            margin: 5px auto;
        }
        #pass {
            width: 100%;
            height: 40px;
            font-size: 30px;
        }
        
        #messageWrapper {
            float: left;
            vertical-align: middle;
            line-height: 30px;
        }
        
        .notifyText {
            display: none;
        }
        
        #invalidPass {
            color: red;
        }
        
        #success {
            color: green;
        }
        
        #submitPass {
            font-size: 20px;
            border-radius: 5px;
            background-color: #E7E7E7;
            border: solid gray 1px;
            float: right;
            cursor: pointer;
        }
        #contentFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #attribution {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.8em;
        }
        #attribution, #attribution a {
            color: #999;
        }
        .error {
            display: none;
            color: red;
        }
    </style>
  </head>
  <body>
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="dialogWrap">
        <div id="dialogWrapCell">
            <div id="mainDialog">
                <div id="dialogText">This page is password protected.</div>
                <div id="passArea">
                    <p id="passwordPrompt">Password</p>
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Sorry, please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Success!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button">Submit</button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>
                <div id="nocrypto" class="error">
                    <p>
                        Your web browser appears to be outdated. Please visit this page using a modern browser.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="attribution">
        Protected by <a href="https://www.maxlaumeister.com/pagecrypt/">PageCrypt</a>
    </div>
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
