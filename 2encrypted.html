<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <title>Password Protected Page</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }
        #dialogText {
            color: white;
            background-color: #333333;
        }
        
        #dialogWrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: table;
            background-color: #EEEEEE;
        }
        
        #dialogWrapCell {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }
        
        #mainDialog {
            max-width: 400px;
            margin: 5px;
            border: solid #AAAAAA 1px;
            border-radius: 10px;
            box-shadow: 3px 3px 5px 3px #AAAAAA;
            margin-left: auto;
            margin-right: auto;
            background-color: #FFFFFF;
            overflow: hidden;
            text-align: left;
        }
        #mainDialog > * {
            padding: 10px 30px;
        }
        #passArea {
            padding: 20px 30px;
            background-color: white;
        }
        #passArea > * {
            margin: 5px auto;
        }
        #pass {
            width: 100%;
            height: 40px;
            font-size: 30px;
        }
        
        #messageWrapper {
            float: left;
            vertical-align: middle;
            line-height: 30px;
        }
        
        .notifyText {
            display: none;
        }
        
        #invalidPass {
            color: red;
        }
        
        #success {
            color: green;
        }
        
        #submitPass {
            font-size: 20px;
            border-radius: 5px;
            background-color: #E7E7E7;
            border: solid gray 1px;
            float: right;
            cursor: pointer;
        }
        #contentFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #attribution {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.8em;
        }
        #attribution, #attribution a {
            color: #999;
        }
        .error {
            display: none;
            color: red;
        }
    </style>
  </head>
  <body>
    <iframe id="contentFrame" frameBorder="0" allowfullscreen></iframe>
    <div id="dialogWrap">
        <div id="dialogWrapCell">
            <div id="mainDialog">
                <div id="dialogText">This page is password protected.</div>
                <div id="passArea">
                    <p id="passwordPrompt">Password</p>
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Sorry, please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Success!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button">Submit</button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>
                <div id="nocrypto" class="error">
                    <p>
                        Your web browser appears to be outdated. Please visit this page using a modern browser.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="attribution">
        Protected by <a href="https://www.maxlaumeister.com/pagecrypt/">PageCrypt</a>
    </div>
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
